import{H as z}from"./header-ce1ba502.js";import{F as K}from"./footer-0b848f08.js";import{a as F,u as L,b as U,j as V,B,r as d,o as l,e as i,f as t,k as r,g as o,F as b,l as D,n as x,t as h,q as A,s as E,x as H,p as P,h as N}from"./index-f6b5f6b4.js";import{l as q}from"./classification-294be7c5.js";import{l as R}from"./tag-10fcd536.js";import{l as j}from"./thing-6c3202c7.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import"./notice-502f1323.js";import"./k-logo-98944f67.js";const u=_=>(P("data-v-cd55abea"),_=_(),N(),_),M={class:"content"},O={class:"content-left"},X={class:"left-search-item"},G=u(()=>t("h4",null,"商品分类",-1)),J={class:"left-search-item"},Q=u(()=>t("h4",null,"热门标签",-1)),W={class:"tag-view tag-flex-view"},Y=["onClick"],Z={class:"content-right"},ee={class:"top-select-view flex-view"},te={class:"order-view"},se=u(()=>t("span",{class:"title"},null,-1)),ae=["onClick"],oe={class:"pc-thing-list flex-view"},ne=["onClick"],ce={class:"img-view"},le=["src"],ie={class:"info-view"},de={class:"thing-name"},re=u(()=>t("span",{class:"a-price-symbol"},"¥",-1)),_e={class:"a-price"},pe={key:0,class:"no-data",style:{}},ge={class:"page-view",style:{}},he={__name:"content",setup(_){F();const k=L(),e=U({selectX:0,selectTagId:-1,cData:[],selectedKeys:[],tagData:[],loading:!1,tabData:["最新","最热","推荐"],selectTabIndex:0,tabUnderLeft:12,thingData:[],pageData:[],page:1,total:0,pageSize:12});V(()=>{S(),g({})});const S=()=>{e.cData.push({key:"-1",title:"全部"}),q().then(s=>{s.data.forEach(a=>{a.key=a.id,e.cData.push(a)})}),R().then(s=>{e.tagData=s.data})},f=()=>e.selectedKeys.length>0?e.selectedKeys[0]:-1,C=s=>{e.selectedKeys=s,console.log(e.selectedKeys[0]),e.selectedKeys.length>0&&g({c:f()}),e.selectTagId=-1},m=s=>{e.selectedKeys=[],e.selectTagId=s,g({tag:e.selectTagId})},v=s=>{e.selectTabIndex=s,e.tabUnderLeft=12+50*s,console.log(e.selectTabIndex);const c={sort:s===0?"recent":s===1?"hot":"recommend"};e.selectTagId!==-1?c.tag=e.selectTagId:c.c=f(),g(c)},y=s=>{let a=k.resolve({name:"detail",query:{id:s.id}});window.open(a.href,"_blank")},I=s=>{e.page=s;let a=(e.page-1)*e.pageSize;e.pageData=e.thingData.slice(a,a+e.pageSize),console.log("第"+e.page+"页")},g=s=>{e.loading=!0,j(s).then(a=>{e.loading=!1,a.data.forEach((c,w)=>{c.cover&&(c.cover=B+"/api/staticfiles/image/"+c.cover)}),console.log(a),e.thingData=a.data,e.total=e.thingData.length,I(1)}).catch(a=>{console.log(a),e.loading=!1})};return(s,a)=>{const c=d("a-tree"),w=d("a-spin"),$=d("a-pagination");return l(),i("div",M,[t("div",O,[t("div",X,[G,r(c,{"tree-data":o(e).cData,"selected-keys":o(e).selectedKeys,onSelect:C,style:{"min-height":"220px"}},null,8,["tree-data","selected-keys"])]),t("div",J,[Q,t("div",W,[(l(!0),i(b,null,D(o(e).tagData,n=>(l(),i("span",{class:x(["tag",{"tag-select":o(e).selectTagId===n.id}]),key:n.id,onClick:p=>m(n.id)},h(n.title),11,Y))),128))])])]),t("div",Z,[t("div",ee,[t("div",te,[se,(l(!0),i(b,null,D(o(e).tabData,(n,p)=>(l(),i("span",{class:x(["tab",o(e).selectTabIndex===p?"tab-select":""]),key:p,onClick:ye=>v(p)},h(n),11,ae))),128)),t("span",{style:A({left:o(e).tabUnderLeft+"px"}),class:"tab-underline"},null,4)])]),r(w,{spinning:o(e).loading,style:{"min-height":"200px"}},{default:E(()=>[t("div",oe,[(l(!0),i(b,null,D(o(e).pageData,n=>(l(),i("div",{key:n.id,onClick:p=>y(n),class:"thing-item item-column-3"},[t("div",ce,[t("img",{src:n.cover},null,8,le)]),t("div",ie,[t("h3",de,h(n.title.substring(0,12)),1),t("span",null,[re,t("span",_e,h(n.price),1)])])],8,ne))),128)),o(e).pageData.length<=0&&!o(e).loading?(l(),i("div",pe,"暂无数据")):H("",!0)])]),_:1},8,["spinning"]),t("div",ge,[r($,{modelValue:o(e).page,"onUpdate:modelValue":a[0]||(a[0]=n=>o(e).page=n),size:"small",onChange:I,hideOnSinglePage:!0,defaultPageSize:o(e).pageSize,total:o(e).total,showSizeChanger:!1},null,8,["modelValue","defaultPageSize","total"])])])])}}},ue=T(he,[["__scopeId","data-v-cd55abea"]]),fe={components:{Footer:K,Header:z,Content:ue},data(){return{}}},me={class:"portal"};function ve(_,k,e,S,f,C){const m=d("Header"),v=d("Content"),y=d("Footer");return l(),i("div",me,[r(m),r(v),r(y)])}const $e=T(fe,[["render",ve]]);export{$e as default};
