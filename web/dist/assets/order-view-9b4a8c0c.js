import{u as A,y as L,a as T,z as u,j as D,B as E,r as d,o as r,e as v,k as l,s as f,f as s,F,l as R,g,t,c as z,I as O,x as U,p as $,h as j,m as w}from"./index-f6b5f6b4.js";import{g as q}from"./index-14399c2b.js";import{u as M,a as P}from"./order-3fcb79be.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const o=_=>($("data-v-9a11afd8"),_=_(),j(),_),H={class:"content-list"},J=o(()=>s("div",{class:"list-title"},"我的订单",-1)),K={class:"list-content"},Q={class:"header flex-view"},W={class:"left"},X=o(()=>s("span",{class:"text"},"订单号",-1)),Y=o(()=>s("span",{class:"num mg-4"},"#",-1)),Z={class:"num"},ss={class:"time"},es={class:"right"},ts=o(()=>s("span",{class:"text"},"订单状态",-1)),os={class:"state"},as={class:"content flex-view"},cs={class:"left-list"},ns={class:"list-item flex-view"},ls=["src"],_s={class:"detail flex-between flex-view"},is={class:"flex-between flex-top flex-view"},ds={class:"name"},rs={class:"count"},ps={class:"flex-between flex-center flex-view"},hs=o(()=>s("span",{class:"type"},null,-1)),us={class:"price"},vs={class:"right-info"},fs=o(()=>s("p",{class:"title"},"收货信息",-1)),xs={class:"name"},ms={class:"text mg"},gs=o(()=>s("p",{class:"title"},"快递单号",-1)),ws=o(()=>s("p",{class:"text"},null,-1)),bs=o(()=>s("p",{class:"title"},"备注信息",-1)),ys={class:"text"},ks={class:"bottom flex-view"},Cs={class:"left"},Is={class:"text"},Ss=["onClick"],Bs={class:"right flex-view"},Ns=o(()=>s("span",{class:"text"},"总计",-1)),Vs={class:"num"},As=o(()=>s("span",{class:"text"},"优惠",-1)),Ls=o(()=>s("span",{class:"num"},"¥0",-1)),Ts=o(()=>s("span",{class:"text"},"实际支付",-1)),Ds={class:"money"},Es={__name:"order-view",setup(_){const b=A();L();const y=T(),p=u(!1),x=u([]),i=u("");D(()=>{h()});const k=a=>{console.log(a),a==="1"&&(i.value=""),a==="2"&&(i.value="1"),a==="3"&&(i.value="2"),h()},h=()=>{p.value=!0;let a=y.user_id;M({userId:a,status:i.value}).then(c=>{c.data.forEach((n,m)=>{n.cover&&(n.cover=E+"/api/staticfiles/image/"+n.cover)}),x.value=c.data,p.value=!1}).catch(c=>{console.log(c),p.value=!1})},C=a=>{let c=b.resolve({name:"detail",query:{id:a}});window.open(c.href,"_blank")},I=a=>{P({id:a.id}).then(c=>{w.success("取消成功"),h()}).catch(c=>{w.error(c.msg||"取消失败")})};return(a,c)=>{const n=d("a-tab-pane"),m=d("a-tabs"),S=d("a-button"),B=d("a-popconfirm");return r(),v("div",H,[J,l(m,{"default-active-key":"1",onChange:k},{default:f(()=>[l(n,{key:"1",tab:"全部"}),l(n,{key:"2",tab:"待付款"}),l(n,{key:"3",tab:"已支付"})]),_:1}),s("div",K,[(r(!0),v(F,null,R(g(x),(e,N)=>(r(),v("div",{class:"order-item-view",key:N},[s("div",Q,[s("div",W,[X,Y,s("span",Z,t(e.orderNumber),1),s("span",ss,t(g(q)(e.orderTime,!0)),1)]),s("div",es,[e.status==="1"?(r(),z(B,{key:0,title:"确定取消订单？","ok-text":"是","cancel-text":"否",onConfirm:V=>I(e)},{default:f(()=>[l(S,{type:"primary",size:"small",style:{"margin-right":"24px"}},{default:f(()=>[O("取消")]),_:1})]),_:2},1032,["onConfirm"])):U("",!0),ts,s("span",os,t(e.status==="1"?"待支付":e.status==="2"?"已支付":"已取消"),1)])]),s("div",as,[s("div",cs,[s("div",ns,[s("img",{src:e.cover,class:"thing-img"},null,8,ls),s("div",_s,[s("div",is,[s("h2",ds,t(e.title),1),s("span",rs,"x"+t(e.count),1)]),s("div",ps,[hs,s("span",us,"¥"+t(e.price),1)])])])]),s("div",vs,[fs,s("p",xs,t(e.receiverName)+t(e.receiverPhone),1),s("p",ms,t(e.receiverAddress),1),gs,ws,bs,s("p",ys,t(e.remark),1)])]),s("div",ks,[s("div",Cs,[s("span",Is,"共"+t(e.count)+"件商品",1),s("span",{class:"open",onClick:V=>C(e.thingId)},"商品详情",8,Ss)]),s("div",Bs,[Ns,s("span",Vs,"¥ "+t(e.price*e.count),1),As,Ls,Ts,s("span",Ds,"¥ "+t(e.price*e.count),1)])])]))),128))])])}}},Us=G(Es,[["__scopeId","data-v-9a11afd8"]]);export{Us as default};
