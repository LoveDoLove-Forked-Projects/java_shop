import{d as K,e as g}from"./comment-3feac44b.js";import{d as B,b as _,j as A,B as N,z as T,r as s,o as f,e as u,f as p,k as n,s as i,I as h,x as V,g as a,m as r,p as E,h as $}from"./index-f6b5f6b4.js";import{g as j}from"./index-14399c2b.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const F=c=>(E("data-v-0ca5f0ab"),c=c(),$(),c),L={class:"page-view"},U={class:"table-operations"},q={key:0},M=F(()=>p("a",{href:"#"},"删除",-1)),G=B({__name:"comment",setup(c){const y=_([{title:"序号",dataIndex:"index",key:"index",align:"center"},{title:"用户",dataIndex:"username",key:"username",align:"center"},{title:"商品名称",dataIndex:"title",key:"title",align:"center"},{title:"评论内容",dataIndex:"content",key:"content",align:"center"},{title:"评论时间",dataIndex:"commentTime",key:"commentTime",align:"center",customRender:({text:e})=>j(e,!0)},{title:"操作",dataIndex:"action",key:"operation",align:"center",fixed:"right",width:140}]),t=_({list:[],loading:!1,currentAdminUserName:"",keyword:"",selectedRowKeys:[],pageSize:10,page:1});_({visile:!1,editFlag:!1,title:"",form:{id:void 0,image:void 0,link:void 0},rules:{link:[{required:!0,message:"请输入",trigger:"change"}]}}),A(()=>{m()});const m=()=>{t.loading=!0,K({keyword:t.keyword}).then(e=>{t.loading=!1,console.log(e),e.data.forEach((o,l)=>{o.index=l+1,o.image&&(o.image=N+o.image)}),t.list=e.data}).catch(e=>{t.loading=!1,console.log(e)})},x=T({onChange:(e,o)=>{console.log(`selectedRowKeys: ${e}`,"selectedRows: ",o),t.selectedRowKeys=e}}),w=()=>{},k=e=>{console.log("delete",e),g({ids:e.id}).then(o=>{m()}).catch(o=>{r.error(o.msg||"操作失败")})},v=()=>{if(console.log(t.selectedRowKeys),t.selectedRowKeys.length<=0){console.log("hello"),r.warn("请勾选删除项");return}g({ids:t.selectedRowKeys.join(",")}).then(e=>{r.success("删除成功"),t.selectedRowKeys=[],m()}).catch(e=>{r.error(e.msg||"操作失败")})};return(e,o)=>{const l=s("a-button"),C=s("a-space"),I=s("a-divider"),b=s("a-popconfirm"),R=s("a-table");return f(),u("div",null,[p("div",L,[p("div",U,[n(C,null,{default:i(()=>[n(l,{type:"primary",onClick:w},{default:i(()=>[h("模拟新增")]),_:1}),n(l,{onClick:v},{default:i(()=>[h("批量删除")]),_:1})]),_:1})]),n(R,{size:"middle",rowKey:"id",loading:a(t).loading,columns:a(y),"data-source":a(t).list,scroll:{x:"max-content"},"row-selection":a(x),pagination:{size:"default",current:a(t).page,pageSize:a(t).pageSize,onChange:d=>a(t).page=d,showSizeChanger:!1,showTotal:d=>`共${d}条数据`}},{bodyCell:i(({text:d,record:S,index:H,column:z})=>[z.key==="operation"?(f(),u("span",q,[n(I,{type:"vertical"}),n(b,{title:"确定删除?","ok-text":"是","cancel-text":"否",onConfirm:J=>k(S)},{default:i(()=>[M]),_:2},1032,["onConfirm"])])):V("",!0)]),_:1},8,["loading","columns","data-source","row-selection","pagination"])])])}}});const X=D(G,[["__scopeId","data-v-0ca5f0ab"]]);export{X as default};
