import{l as L,a as N,d as h}from"./order-3fcb79be.js";import{g as V}from"./index-14399c2b.js";import{d as $,b as y,j as A,z as j,r as s,o as g,e as w,f as _,k as c,s as i,I as x,c as E,t as F,x as k,g as n,m as l,p as M,h as q}from"./index-f6b5f6b4.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const v=d=>(M("data-v-81a9c8e9"),d=d(),q(),d),H={class:"page-view"},J={class:"table-operations"},O={key:1},P=v(()=>_("a",{href:"#"},"取消",-1)),Q=v(()=>_("a",{href:"#"},"删除",-1)),U=$({__name:"order",setup(d){const C=y([{title:"序号",dataIndex:"index",key:"index",align:"center"},{title:"用户",dataIndex:"username",key:"username",align:"center"},{title:"商品",dataIndex:"title",key:"title",align:"center",customRender:({text:e})=>e?e.substring(0,10)+"...":"--"},{title:"状态",dataIndex:"status",key:"status",align:"center",scopedSlots:{customRender:"status"}},{title:"订单时间",dataIndex:"orderTime",key:"orderTime",align:"center",customRender:({text:e})=>V(e,!0)},{title:"操作",dataIndex:"action",key:"operation",align:"center",fixed:"right",width:140}]),t=y({tagList:[],loading:!1,keyword:"",selectedRowKeys:[],pageSize:10,page:1});A(()=>{r()});const r=()=>{t.loading=!0,L({keyword:t.keyword}).then(e=>{t.loading=!1,console.log(e),e.data.forEach((o,p)=>{o.index=p+1}),t.tagList=e.data}).catch(e=>{t.loading=!1,console.log(e)})},I=j({onChange:(e,o)=>{console.log(`selectedRowKeys: ${e}`,"selectedRows: ",o),t.selectedRowKeys=e}}),R=e=>{N({id:e.id}).then(o=>{r(),l.success("取消成功")}).catch(o=>{l.error(o.msg||"操作失败")})},S=e=>{console.log("delete",e),h({ids:e.id}).then(o=>{r()}).catch(o=>{l.error(o.msg||"操作失败")})},b=()=>{if(console.log(t.selectedRowKeys),t.selectedRowKeys.length<=0){console.log("hello"),l.warn("请勾选删除项");return}h({ids:t.selectedRowKeys.join(",")}).then(e=>{l.success("删除成功"),t.selectedRowKeys=[],r()}).catch(e=>{l.error(e.msg||"操作失败")})};return(e,o)=>{const p=s("a-button"),z=s("a-space"),K=s("a-tag"),m=s("a-popconfirm"),B=s("a-divider"),T=s("a-table");return g(),w("div",null,[_("div",H,[_("div",J,[c(z,null,{default:i(()=>[c(p,{onClick:b},{default:i(()=>[x("批量删除")]),_:1})]),_:1})]),c(T,{size:"middle",rowKey:"id",loading:n(t).loading,columns:n(C),"data-source":n(t).tagList,scroll:{x:"max-content"},"row-selection":n(I),pagination:{size:"default",current:n(t).page,pageSize:n(t).pageSize,onChange:a=>n(t).page=a,showSizeChanger:!1,showTotal:a=>`共${a}条数据`}},{bodyCell:i(({text:a,record:u,index:W,column:f})=>[f.key==="status"?(g(),E(K,{key:0,color:a==="1"?"#2db7f5":"#87d068"},{default:i(()=>[x(F(a==="1"?"待支付":a==="2"?"已支付":"已取消"),1)]),_:2},1032,["color"])):k("",!0),f.key==="operation"?(g(),w("span",O,[c(m,{title:"确定取消?","ok-text":"是","cancel-text":"否",onConfirm:D=>R(u)},{default:i(()=>[P]),_:2},1032,["onConfirm"]),c(B,{type:"vertical"}),c(m,{title:"确定删除?","ok-text":"是","cancel-text":"否",onConfirm:D=>S(u)},{default:i(()=>[Q]),_:2},1032,["onConfirm"])])):k("",!0)]),_:1},8,["loading","columns","data-source","row-selection","pagination"])])])}}});const te=G(U,[["__scopeId","data-v-81a9c8e9"]]);export{te as default};
