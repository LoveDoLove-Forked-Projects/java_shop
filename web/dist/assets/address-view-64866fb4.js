import{l as L,d as O,u as R,c as $}from"./address-32a3c403.js";import{d as j,a as q,b as D,z,j as G,r as i,o as u,e as v,f as s,F,l as H,t as x,k as t,s as n,g as d,x as J,p as K,h as P}from"./index-f6b5f6b4.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";const T=""+new URL("address-right-icon-b4e00956.svg",import.meta.url).href,h=c=>(K("data-v-a0e015ca"),c=c(),P(),c),W={class:"content-list"},X=h(()=>s("span",null,"地址管理",-1)),Y={class:"list-content"},Z={class:"address-item flex-view"},ee={class:"infos"},oe={class:"name-box"},te={class:"name"},se={class:"tel"},ae={class:"address-box"},ne={class:"do-box"},le={class:"btns"},de=["onClick"],ie=h(()=>s("span",{class:"delete"},"删除",-1)),re={key:0,class:"default-box"},ce=["src"],me=h(()=>s("span",null,"默认地址",-1)),_e=h(()=>s("div",{class:"no-data",style:{display:"none"}},"暂无地址",-1)),fe=j({__name:"address-view",setup(c){const w=q(),y=D({addressData:[]}),e=D({visile:!1,editFlag:!1,title:"",form:{id:void 0,name:void 0,mobile:void 0,description:void 0,default:!1},rules:{link:[{required:!0,message:"请输入",trigger:"change"}]}}),g=z();G(()=>{m()});const m=()=>{let a=w.user_id;L({userId:a}).then(o=>{y.addressData=o.data}).catch(o=>{console.log(o)})},A=a=>{O({ids:a.id}).then(o=>{m()}).catch(o=>{console.log(o)})},I=()=>{C(),e.visile=!0,e.editFlag=!1,e.title="新增";for(const a in e.form)e.form[a]=void 0;e.form.image=void 0},S=a=>{C(),e.visile=!0,e.editFlag=!0,e.title="编辑";for(const o in e.form)e.form[o]=void 0;for(const o in a)e.form[o]=a[o];e.form.image=void 0},U=()=>{var a;(a=g.value)==null||a.validate().then(()=>{const o=new FormData;o.append("userId",w.user_id),o.append("def",e.form.default?"1":"0"),e.form.id&&o.append("id",e.form.id),e.form.name&&o.append("name",e.form.name),e.form.mobile&&o.append("mobile",e.form.mobile),e.form.description&&o.append("description",e.form.description),e.editFlag?R(o).then(r=>{b(),m()}).catch(r=>{console.log(r)}):$(o).then(r=>{b(),m()}).catch(r=>{console.log(r)})}).catch(o=>{console.log("不能为空")})},V=()=>{b()},C=()=>{var a;(a=g.value)==null||a.resetFields()},b=()=>{e.visile=!1};return(a,o)=>{const r=i("a-popconfirm"),k=i("a-input"),_=i("a-form-item"),f=i("a-col"),p=i("a-row"),B=i("a-switch"),M=i("a-form"),N=i("a-modal");return u(),v(F,null,[s("div",W,[s("div",{class:"list-title"},[X,s("span",{class:"add-new-btn",onClick:I},"新建地址")]),s("div",Y,[(u(!0),v(F,null,H(d(y).addressData,l=>(u(),v("div",Z,[s("div",ee,[s("div",oe,[s("span",te,x(l.name),1),s("span",se,x(l.mobile),1)]),s("p",ae,x(l.description),1)]),s("div",ne,[s("div",le,[s("span",{class:"edit",onClick:E=>S(l)},"编辑",8,de),t(r,{title:"确定删除？","ok-text":"是","cancel-text":"否",onConfirm:E=>A(l)},{default:n(()=>[ie]),_:2},1032,["onConfirm"])]),l.def==="1"?(u(),v("div",re,[s("img",{src:d(T)},null,8,ce),me])):J("",!0)])]))),256)),_e])]),s("div",null,[t(N,{visible:d(e).visile,forceRender:!0,title:d(e).title,"ok-text":"确认","cancel-text":"取消",onCancel:V,onOk:U},{default:n(()=>[s("div",null,[t(M,{ref_key:"myform",ref:g,"label-col":{style:{width:"80px"}},model:d(e).form,rules:d(e).rules},{default:n(()=>[t(p,{gutter:24},{default:n(()=>[t(f,{span:"24"},{default:n(()=>[t(_,{label:"姓名",name:"name"},{default:n(()=>[t(k,{placeholder:"请输入",value:d(e).form.name,"onUpdate:value":o[0]||(o[0]=l=>d(e).form.name=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(p,{gutter:24},{default:n(()=>[t(f,{span:"24"},{default:n(()=>[t(_,{label:"电话号码",name:"mobile"},{default:n(()=>[t(k,{placeholder:"请输入",value:d(e).form.mobile,"onUpdate:value":o[1]||(o[1]=l=>d(e).form.mobile=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(p,{gutter:24},{default:n(()=>[t(f,{span:"24"},{default:n(()=>[t(_,{label:"送货地址",name:"description"},{default:n(()=>[t(k,{placeholder:"请输入",value:d(e).form.description,"onUpdate:value":o[2]||(o[2]=l=>d(e).form.description=l)},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(p,{gutter:24},{default:n(()=>[t(f,{span:"24"},{default:n(()=>[t(_,{label:"默认地址"},{default:n(()=>[t(B,{checked:d(e).form.default,"onUpdate:checked":o[3]||(o[3]=l=>d(e).form.default=l)},null,8,["checked"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["visible","title"])])],64)}}});const he=Q(fe,[["__scopeId","data-v-a0e015ca"]]);export{he as default};
