import{u as k,a as y,z as F,b as I,j as V,J as U,B as S,r as _,o as u,e as v,k as h,s as x,g as a,f as e,x as B,w as c,v as m,p as D,h as E,K as N,m as C}from"./index-f6b5f6b4.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const i=d=>(D("data-v-f8ed5cf8"),d=d(),E(),d),G={class:"content-list"},M=i(()=>e("div",{class:"list-title"},"设置",-1)),P={class:"list-content"},J={class:"edit-view"},R={class:"item flex-view"},T=i(()=>e("div",{class:"label"},"头像",-1)),j={class:"right-box avatar-box flex-view"},z=["src"],K={class:"change-tips flex-view"},L=i(()=>e("label",null,"点击更换头像",-1)),X=i(()=>e("p",{class:"tip"},"图片格式支持 GIF、PNG、JPEG，尺寸不小于 200 PX，小于 4 MB",-1)),$={class:"item flex-view"},q=i(()=>e("div",{class:"label"},"昵称",-1)),H={class:"right-box"},O=i(()=>e("p",{class:"tip"},"支持中英文，长度不能超过 20 个字符",-1)),Q={class:"item flex-view"},W=i(()=>e("div",{class:"label"},"手机号",-1)),Y={class:"right-box"},Z={class:"item flex-view"},ee=i(()=>e("div",{class:"label"},"邮箱",-1)),te={class:"right-box"},se={class:"item flex-view"},oe=i(()=>e("div",{class:"label"},"个人简介",-1)),ae={class:"right-box"},ie=i(()=>e("p",{class:"tip"},"限制200字以内",-1)),ne={__name:"userinfo-edit-view",setup(d){k();const p=y();let r=F(!1),t=I({form:{avatar:void 0,avatarFile:void 0,nickname:void 0,email:void 0,mobile:void 0,description:void 0}});V(()=>{f()});const g=o=>{const s=new Date().getTime().toString()+"."+o.type.substring(6),l=new File([o],s);return console.log(l),t.form.avatarFile=l,!1},f=()=>{r.value=!0;let o=p.user_id;U({userId:o}).then(s=>{t.form=s.data,t.form.avatar&&(t.form.avatar=S+"/api/staticfiles/avatar/"+t.form.avatar),r.value=!1}).catch(s=>{console.log(s),r.value=!1})},b=()=>{let o=new FormData,s=p.user_id;o.append("id",s),t.form.avatarFile&&o.append("avatarFile",t.form.avatarFile),t.form.nickname&&o.append("nickname",t.form.nickname),t.form.email&&o.append("email",t.form.email),t.form.mobile&&o.append("mobile",t.form.mobile),t.form.description&&o.append("description",t.form.description),N(o).then(l=>{C.success("保存成功"),f()}).catch(l=>{console.log(l)})};return(o,s)=>{const l=_("a-upload"),w=_("a-spin");return u(),v("div",G,[M,h(w,{spinning:a(r),style:{"min-height":"200px"}},{default:x(()=>[e("div",P,[e("div",J,[e("div",R,[T,e("div",j,[a(t).form!==null?(u(),v("img",{key:0,src:a(t).form.avatar,class:"avatar"},null,8,z)):B("",!0),e("div",K,[h(l,{name:"file",accept:"image/*",multiple:!1,"before-upload":g},{default:x(()=>[L]),_:1}),X])])]),e("div",$,[q,e("div",H,[c(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>a(t).form.nickname=n),placeholder:"请输入昵称",maxlength:"20",class:"input-dom"},null,512),[[m,a(t).form.nickname]]),O])]),e("div",Q,[W,e("div",Y,[c(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>a(t).form.mobile=n),placeholder:"请输入邮箱",maxlength:"100",class:"input-dom web-input"},null,512),[[m,a(t).form.mobile]])])]),e("div",Z,[ee,e("div",te,[c(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=n=>a(t).form.email=n),placeholder:"请输入邮箱",maxlength:"100",class:"input-dom web-input"},null,512),[[m,a(t).form.email]])])]),e("div",se,[oe,e("div",ae,[c(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=n=>a(t).form.description=n),placeholder:"请输入简介",maxlength:"200",class:"intro"},`\r
          `,512),[[m,a(t).form.description]]),ie])]),e("button",{class:"save mg",onClick:s[4]||(s[4]=n=>b())},"保存")])])]),_:1},8,["spinning"])])}}},re=A(ne,[["__scopeId","data-v-f8ed5cf8"]]);export{re as default};
